<div class="push4slideMenu  pageMinHeight" id="scrollToTop">
	<div class="container-fluid pushFixedHeaderFooter">
        <div class="headerPush"></div>
		<section class="row">
			<div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12" *ngIf="result.grantCall!={}">
				<br>
				<div class="row">
					<div class="col-xl-8 col-lg-8 col-md-12 col-sm-12 col-12 text-left"><span *ngIf="grantId != null" class="topHeading">#{{grantId}} : {{result?.grantCall?.grantCallName}}</span></div>
					<div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-12 text-right ">
						<span *ngIf="result?.grantCall?.grantCallStatus?.description == 'Open'" class = "grantCall_create_proposal_link">
						<button class="btnSkin btnSkinPrimary" (click)="navigate($event, 'create')">Create Application</button></span>
						<!-- <span class="linkButtonGroup"> <a (click)="navigate($event, 'create')">
								<i class="fa fa-plus"></i> Create New Project
						</a>
						</span> -->
						<button class="btnSkin btnSkinPrimary" data-target="#confirmGoBack" data-toggle="modal" (click)="openGoBackModal()">Back to Grant Call</button>
					</div>
				</div>
				<br>
					<div class="row" id="fadeOutMessage" *ngIf="showSavedSuccessfully">
						<div class="col-12 text-left"><span class="successWarning" *ngIf="showSavedSuccessfully">Saved Successfully</span></div>
					</div>
					<div class="row">
					<div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
						<div class="borderBox"><h4 class="borderBoxHeading">
							<div class="row">
								<div class="col-xl-8 col-lg-8 col-md-8 col-sm-8 col-8">Overview</div>
								<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-4 text-right colorBlack"><span style="margin-right: 10px"><label style="margin-right: 10px">Status: </label>{{result?.grantCall?.grantCallStatus?.description}}</span></div>
							</div></h4>
							<p *ngIf = "showWarning"><span class="mandatory warningMessage">* Please fill all the mandatory fields marked</span></p>
							<div class="pullSide">
								<div class="topGrid gridSkin">
										<div class="row">
											<div class="col-xl-6 col-lg-6 col-md-6 col-sm-12 col-6"><label><span class="mandatory" *ngIf="mode != 'view'">*</span>Title:</label><br><input *ngIf="mode != 'view'" type="text" placeholder="" class="dateBox" [(ngModel)] = "result.grantCall.grantCallName" [ngClass]="editClass" />
												<span *ngIf="mode == 'view'">{{result?.grantCall?.grantCallName}}</span>
											</div>					
											<div class="col-xl-2 col-lg-2 col-md-6 col-sm-12 col-2"><label><span class="mandatory" *ngIf="mode != 'view'">*</span>Type:</label><br>
												<select *ngIf="mode!='view'" class="dateBox" [(ngModel)]="grantCallTypeSelected" [ngClass]="editClass" (change) = "grantCallTypeChange($event.target.value)">
													<option value="select">{{select}}</option>
													<option *ngFor="let type of result?.grantCallTypes" (value)="type">{{type.description}}</option>
												</select>
												<span *ngIf="mode == 'view'">{{grantCallTypeSelected}}</span>
											</div>
											<div class="col-xl-2 col-lg-2 col-md-6 col-sm-12 col-2"><label><span class="mandatory" *ngIf="mode != 'view'">*</span>Opening Date:</label><br><span *ngIf="mode != 'view'" class="dateField"><input type="text" placeholder="MM/dd/yyyy" [(ngModel)] = "result.grantCall.openingDate" [ngClass]="editClass" (keypress)="_keyPress($event)" [owlDateTime]="openingDt"  class="committeeBox dateWidth"/>&nbsp;
												<span class="fa fa-calendar fa-large pointer insidePicker" title="open calendar" [owlDateTimeTrigger]="openingDt"></span><owl-date-time #openingDt [pickerType]="'calendar'" (afterPickerClosed)="dateValidation()" ></owl-date-time></span>
												<span *ngIf="mode == 'view'" >{{result?.grantCall?.openingDate | date: 'MM/dd/yyyy'}}</span></div>
											<div class="col-xl-2 col-lg-2 col-md-6 col-sm-12 col-2"><label><span class="mandatory" *ngIf="mode != 'view'">*</span>Closing Date:</label><br><span *ngIf="mode != 'view'" class="dateField"><input type="text" placeholder="MM/dd/yyyy" [(ngModel)] = "result.grantCall.closingDate" [ngClass]="editClass" (keypress)="_keyPress($event)" [owlDateTime]="closingDt"  class="committeeBox dateWidth"/>&nbsp;
												<span class="fa fa-calendar fa-large pointer insidePicker" title="open calendar" [owlDateTimeTrigger]="closingDt"></span> <owl-date-time #closingDt [pickerType]="'calendar'" (afterPickerClosed)="dateValidation()"></owl-date-time></span>
												<span *ngIf="mode == 'view'" >{{result?.grantCall?.closingDate | date: 'MM/dd/yyyy'}}</span>
											</div>
										</div>
										<div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"  *ngIf="isDateWarningText"><span class="mandatory font">* {{dateWarningText}}</span>
										</div>
										<div class="row">
											<div class="col-xl-6 col-lg-6 col-md-6 col-sm-12 col-6" ><label><span class="mandatory" *ngIf="mode != 'view'">*</span>Description:</label><br><textarea rows="2" placeholder = "" *ngIf="mode != 'view'" [(ngModel)] = "result.grantCall.description" class="forTextAreaEntry" [ngClass]="editAreaClass"></textarea>
															<p *ngIf="mode == 'view' && !isDescReadMore">{{(result?.grantCall?.description).length>240 ? (result?.grantCall?.description | slice:0:240)+'...' : result?.grantCall?.description}}
															<span *ngIf="(result?.grantCall?.description.length>240)" class="hand-cursor fibiDefaultColor italian" (click)="isDescReadMore = !isDescReadMore">Read more<i [ngClass]="isDescReadMore?'fa fa-angle-double-left':'fa fa-angle-double-right'"></i></span>
															</p>
															<p *ngIf="mode == 'view' && isDescReadMore">{{result?.grantCall?.description}}
															<span *ngIf="(result?.grantCall?.description.length>240)" class="hand-cursor fibiDefaultColor italian" (click)="isDescReadMore = !isDescReadMore">Show less<i [ngClass]="isDescReadMore?'fa fa-angle-double-left':'fa fa-angle-double-right'"></i></span>
															</p>
															</div>
											<div class="col-xl-6 col-lg-6 col-md-6 col-sm-12 col-6"><label><span class="mandatory" *ngIf="mode != 'view'">*</span>Grant Theme</label><textarea rows="2" placeholder="" *ngIf="mode != 'view'" maxlength="3999" [(ngModel)] = "result.grantCall.grantTheme" class="forTextAreaEntry" [ngClass]="editAreaClass"></textarea>
															<p *ngIf="mode == 'view' && !isThemeReadMore">{{(result?.grantCall?.grantTheme).length>240 ? (result?.grantCall?.grantTheme | slice:0:240)+'...' : result?.grantCall?.grantTheme}}
															<span *ngIf="(result?.grantCall?.grantTheme.length>300)" class="hand-cursor fibiDefaultColor italian" (click)="isThemeReadMore = !isThemeReadMore">Read more<i [ngClass]="isThemeReadMore?'fa fa-angle-double-left':'fa fa-angle-double-right'"></i></span>
															</p>
															<p *ngIf="mode == 'view' && isThemeReadMore">{{result?.grantCall?.grantTheme}}
															<span *ngIf="(result?.grantCall?.grantTheme.length>300)" class="hand-cursor fibiDefaultColor italian" (click)="isThemeReadMore = !isThemeReadMore">Show less<i [ngClass]="isThemeReadMore?'fa fa-angle-double-left':'fa fa-angle-double-right'"></i></span>
															</p>
															</div>
										</div>
										<div class="row">
											<div class="col-xl-3 col-lg-3 col-md-6 col-sm-12 col-3"><label><span class="mandatory" *ngIf="mode != 'view'">*</span>Max Budget (SGD):</label><br><input type="number" placeholder="" *ngIf="mode != 'view'" [(ngModel)] = "result.grantCall.maximumBudget" [ngClass]="editClass" class="dateBox" />
												<span *ngIf="mode == 'view'">{{result?.grantCall?.maximumBudget | currency:'USD':true}}</span>
											</div>
											<div class="col-xl-3 col-lg-3 col-md-6 col-sm-12 col-3" ><label>Quantum:</label><span class="mandatory" *ngIf="mode != 'view' && isString"> ( {{stringWarning}} )</span><br><input *ngIf="mode != 'view'" type="number" [(ngModel)] = "result.grantCall.quantum" placeholder="" [ngClass]="editClass" class="dateBox" (keypress)="stringRestriction($event)"/>
													<span *ngIf="mode == 'view'">{{result?.grantCall?.quantum}}</span>
													<span *ngIf="result.grantCall.quantum == null && mode == 'view'" class="noDataExists">
														No quantum specified</span>
											</div>
											<div class="col-xl-3 col-lg-3 col-md-6 col-sm-12 col-3"><label>Lead Unit:</label><br>
												<ng2-completer *ngIf="mode!='view'" 
													[inputClass]="completerID"
													[(ngModel)]="selectedHomeUnit" placeholder="Search here for Lead Unit"
													[datasource]="homeUnits" [minSearchLength]="0"
													(selected)="homeUnitChangeFunction()"  class="widthLimiterNg2Completer" class="p-0 border-0 dateBox" ></ng2-completer>
												<span *ngIf="mode == 'view'">{{result?.grantCall?.homeUnitName}}</span>
												<span *ngIf="result.grantCall.homeUnitName == null && mode == 'view'" class="noDataExists">
														No lead unit specified</span>
											</div>
                                        	<div class="col-xl-3 col-lg-3 col-md-6 col-sm-12 col-3" *ngIf="grantCallTypeSelected == 'External'">
                                        		<label><span class="mandatory" *ngIf="mode != 'view'">*</span>External Weblink:</label><br><input *ngIf="mode != 'view'" class="dateBox" type="text" placeholder="" [(ngModel)] = "result.grantCall.externalUrl" [ngClass]="editClass"/>
                                       			<span *ngIf="mode == 'view'">{{result?.grantCall?.externalUrl}}</span>
                                       			<span *ngIf="mode == 'view' && result.grantCall.externalUrl == null" class="noDataExists">No external link provided</span>
                                       		</div>
                                        </div>
                                        <div class="row">
											<div class="col-xl-6 col-lg-6 col-md-6 col-sm-12 col-4" ><label>Application Procedure:</label><br><textarea rows="2" *ngIf="mode != 'view'" placeholder="" maxlength="3999" [(ngModel)] = "result.grantCall.applicationProcedure" [ngClass]="editAreaClass" class="forTextAreaEntry" ></textarea>
														<span *ngIf="mode == 'view' && result?.grantCall?.applicationProcedure != null"><p *ngIf="mode == 'view' && !isApplProcReadMore">{{(result?.grantCall?.applicationProcedure).length>240 ? (result?.grantCall?.applicationProcedure | slice:0:240)+'...' : result?.grantCall?.applicationProcedure}}
															<span *ngIf="(result?.grantCall?.applicationProcedure.length>240)" class="hand-cursor fibiDefaultColor italian" (click)="isApplProcReadMore = !isApplProcReadMore">Read more<i [ngClass]="isApplProcReadMore?'fa fa-angle-double-left':'fa fa-angle-double-right'"></i></span>
															</p>
															<p *ngIf="mode == 'view' && isApplProcReadMore">{{result?.grantCall?.applicationProcedure}}
															<span *ngIf="(result?.grantCall?.applicationProcedure.length>240)" class="hand-cursor fibiDefaultColor italian" (click)="isApplProcReadMore = !isApplProcReadMore">Show less<i [ngClass]="isApplProcReadMore?'fa fa-angle-double-left':'fa fa-angle-double-right'"></i></span>
															</p>
														</span>
														<span *ngIf="mode == 'view' && result?.grantCall?.applicationProcedure == null" class="noDataExists">No procedure details provided</span>
											</div>
											<div class="col-xl-6 col-lg-6 col-md-6 col-sm-12 col-6">
                                       			<label>Other Information:</label><br><textarea rows="2" *ngIf="mode != 'view'" placeholder="" maxlength="3999" [(ngModel)] = "result.grantCall.otherInformation" [ngClass]="editAreaClass" class="forTextAreaEntry" ></textarea>
                                           		<span *ngIf="mode == 'view' && result?.grantCall?.otherInformation != null"><p *ngIf="mode == 'view' && !isOtherInfoReadMore">{{(result?.grantCall?.otherInformation).length>240 ? (result?.grantCall?.otherInformation | slice:0:240)+'...' : result?.grantCall?.otherInformation}}
													<span *ngIf="(result?.grantCall?.otherInformation.length>240)" class="hand-cursor fibiDefaultColor italian" (click)="isOtherInfoReadMore = !isOtherInfoReadMore">Read more<i [ngClass]="isOtherInfoReadMore?'fa fa-angle-double-left':'fa fa-angle-double-right'"></i></span>
													</p>
													<p *ngIf="mode == 'view' && isOtherInfoReadMore">{{result?.grantCall?.otherInformation}}
													<span *ngIf="(result?.grantCall?.otherInformation.length>240)" class="hand-cursor fibiDefaultColor italian" (click)="isOtherInfoReadMore = !isOtherInfoReadMore">Show less<i [ngClass]="isOtherInfoReadMore?'fa fa-angle-double-left':'fa fa-angle-double-right'"></i></span>
													</p>
												</span>
                                           		<span *ngIf="mode == 'view' && result?.grantCall?.otherInformation == null" class="noDataExists">No other information provided</span>
                                   			</div>
                                        </div>	
                                        <div class="row">
											<div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"><label>Keywords:</label><br>
												<div class="row">
													<div class="col-xl-2 col-lg-2 col-md-6 col-sm-12 col-2" *ngIf="mode!='view'" style="padding-left: 0px">
														<ng2-completer 
															[inputClass]="completerID"
															[(ngModel)]="selectedKeyword" placeholder="Search here for Keyword"
															[datasource]="keywordsList" [minSearchLength]="0"
															(selected)="keywordChangeFunction()"  class="widthLimiterNg2Completer dateBox" [disabled]="mode == 'view'" *ngIf="mode!='view';else showNoKeyword"></ng2-completer>
														<span *ngIf="result?.grantCall?.grantCallKeywords?.length == 0 && mode == 'view'" class="noDatExists">No keywords are present for this grant</span>
													</div>
													<div class="col-xl-10 col-lg-10 col-md-6 col-sm-12 col-10" style="padding-left: 0px">
														<div *ngIf="result?.grantCall?.grantCallKeywords?.length != 0" class="fileChips" style="word-break: break-all;">
															<span *ngFor="let keyword of result?.grantCall?.grantCallKeywords;let i = index">{{keyword.scienceKeyword.description}}<i class="fa fa-close pointer" *ngIf="mode != 'view'" (click)="deleteKeyword(keyword,i)" title="remove this keyword"></i>&nbsp;</span>
														</div>
													</div>
												</div>
											</div>
                                        </div>
                                        <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12" *ngIf="keyWordWarningMessage!=null"><span class="mandatory regularFont">*{{keyWordWarningMessage}}</span></div>
                                  </div>
							</div>
						</div>
					</div>
				</div>
				
                                <div class="borderBox">
                                                <h4 class="borderBoxHeading">Funding Agency Information</h4>
                                                <div class="pullSide">
                                                        <div class="topGrid gridSkin">
                                                                   <div class="row" *ngIf="!(mode == 'view' && result?.grantCall?.sponsor == null)">
                                                                          	<div class="col-xl-4 col-lg-4 col-md-6 col-sm-12 col-4"><label>Type:</label><br>
																				<select *ngIf="mode!='view'" class="dateBox" [(ngModel)]="selectedSponsorType" [ngClass]="editClass" (change) = "sponsorTypeChange($event.target.value)">
																					<option>{{select}}</option>
																					<option *ngFor="let type of result?.sponsorTypes" (value)="type">{{type.description}}</option>
																				</select>
																				<span *ngIf="mode == 'view'">{{result?.grantCall?.sponsorType?.description}}</span>
																			</div>	
																		 	<div class="col-xl-4 col-lg-4 col-md-6 col-sm-12 col-4"><label>Name:</label><br> 
																		 		<select *ngIf="mode != 'view'" class="dateBox" [ngClass]="editClass" [(ngModel)]="selectedSponsor"  (change) = "sponsorNameChange($event.target.value)" >
																					<option>{{select}}</option>
																					<option *ngFor="let sponsor of result?.sponsors" (value)="sponsor" >{{sponsor.sponsorName}}
																					</option>
																				</select>
																				<span *ngIf="mode == 'view'">{{result?.grantCall?.sponsor?.sponsorName}}</span>
																			</div>
                                                                          	<div class="col-xl-2 col-lg-2 col-md-6 col-sm-12 col-2"><label>Research Type:</label><br>
									                                           <select *ngIf="mode != 'view'" [ngClass]="editClass" class="dateBox" (change)="researchTypeChange($event.target.value)" [(ngModel)] = "selectedActivityType">
																					<option>{{select}}</option>
																					<option *ngFor="let type of result?.activityTypes" (value)="type" >
																						{{type.description}}
																					</option>
																				</select>
																				<span *ngIf="mode == 'view'">{{result?.grantCall?.activityType?.description}}</span>
																			</div>
                                                                          	<div class="col-xl-2 col-lg-2 col-md-6 col-sm-12 col-2"><label>Funding Type:</label><br>
		                                                                         <select [ngClass]="editClass"  *ngIf="mode != 'view'" class="dateBox" (change)="fundingTypeChange($event.target.value)" [(ngModel)] = "selectedFundingType">
																					<option>{{select}}</option>
																					<option *ngFor="let type of this.result?.fundingSourceTypes" (value)="type"> {{type.description}}
																					</option>
																				 </select>
																				<span *ngIf="mode == 'view'">{{result?.grantCall?.fundingSourceType?.description}}</span>
																			</div>
                                                                   </div>
                                                                   <div class="row" style="padding-left: 25px" *ngIf="(mode == 'view' && result?.grantCall?.sponsor == null)">
                                                                   		<div class="col-12">
                                                                   			<span class="noDataExists" >No funding agency specified</span>
                                                                   		</div>
                                                                   </div>
                                                      </div>
                                                </div>
                                 </div>   
                                 <div class="borderBox col-12">
										<h4 class="borderBoxHeading">Point of Contact</h4>
										<button id="pointOfContactAddBtn" class="addBtn font hoverColor btnPositionFullWidget" (click)="showaddPointOfContact()" 
											*ngIf="(result?.grantCall?.grantCallContacts?.length > 0 && mode == 'view') || (mode != 'view')"><i class="fa-large" [ngClass]="showAddPointOfContact?'fa fa-angle-double-up':'fa fa-angle-double-down'"></i>
										</button>
										<table class="table table-responsive tableSkin grid2">
											<tr id="addPointOfContactRow" *ngIf="showAddPointOfContact && mode != 'view'">
												<td>
													<label>Is SMU Person:</label><br>
													<input class="text-center" #isSMUPersonCheck class="checkClass" type="checkbox" [checked]="isSMUChecked" (change)="personTypeChanged(isSMUPersonCheck.checked)">
												</td>
												<td>
													<label>
														Name:
													</label> <br>
													<input type="text" *ngIf="!isSMUChecked" [ngClass]="editClass" placeholder="" [(ngModel)] = "pointOfContactObject.fullName" [disabled]="mode == 'view'">
													<div class="searchBox memberSearchBox" *ngIf="isSMUChecked">
																		<input type="text" placeholder="Search here for contact person" [(ngModel)]="searchTextModel" (blur)="searchActive = false" (focus)="searchActive = true" id="member_search"
																			[formControl]="searchText" (ngModelChange)="onSearchValueChange()"/> <a href="#"
																			class="searchButton" (click)="clearSearchBox($event)"><i
																			[ngClass]="iconClass"></i></a>
																		<div class="sb-seachresults"  *ngIf="searchActive">
																			<ul class="sb-results-dropdown-menu text-left">
																				<li *ngFor="let result of this.elasticSearchresults "
																					(mousedown)="selected(result)"><span
																					[innerHTML]="result.label"></span></li>
																			</ul>
																		</div>
																	</div>
												</td>
												<td>
													<label>
														Designation:
													</label> <br>
													<input type="text" class="dateBox" [ngClass]="editClass" placeholder="" [(ngModel)] = "pointOfContactObject.designation" [disabled]="mode == 'view'">
												</td>
												<td>
													<label>
														Email:
													</label> <br>
													<input type="text" class="dateBox" [ngClass]="pocClass" [(ngModel)] = "pointOfContactObject.email" [disabled]="mode == 'view' || isSMUChecked" >
												</td>
												<td>
													<label>
														Phone:
													</label> <br>
													<input type="text" class="dateBox" [ngClass]="pocClass" [(ngModel)] = "pointOfContactObject.mobile" [disabled]="mode == 'view' || isSMUChecked">
												</td>
												<td colspan="2"> <br>
													<button class="btnSkin btnSkinPrimary"  (click)="addPointOfContact(pointOfContactObject)">Add</button>
												</td>
											</tr>
											<tbody *ngIf="showAddPointOfContact && result?.grantCall?.grantCallContacts?.length > 0">
												<tr >
													<th >Sl no</th>
													<th >Name</th>
													<th >Designation</th>
													<th >Email</th>
													<th >Phone</th>
													<!-- <th >Is SMU Person</th> -->
													<th *ngIf="mode != 'view'">Action</th>
						
												</tr>
												<tr *ngFor = "let pointOfContact of result?.grantCall?.grantCallContacts; let i = index">
						                            <td>{{i+1}}</td>
													<td>{{pointOfContact.fullName}}</td>
													<td>{{pointOfContact.designation}}</td>
													<td>{{pointOfContact.email}}</td>
													<td>{{pointOfContact.mobile}}</td>
													<!-- <td><i [ngClass]="(pointOfContact.isSMUPerson == true)?'fa fa-check-square-o fa-large':'fa fa-times fa-large'"></i></td> -->
													<td *ngIf="mode != 'view'">
														<ul class="actionButtonGroup">
															<li><a href="#" data-toggle="modal"
																data-target="#deletePointOfContact"
																(click)="tempSavePointOfContact($event,pointOfContact,i)"><i
																	class="fa fa-trash-o pointer" aria-hidden="true" title="remove this person"></i></a></li>
														</ul>
													</td>
												</tr>
												<tr *ngIf="!valid">
													<td colspan="6"><span class="mandatory">* {{validationError}}</span></td>
												</tr>
											</tbody>
											<tr *ngIf="result?.grantCall?.grantCallContacts?.length == 0 && mode == 'view'">
												<td colspan="6"><div class="noDataExists">
														There are no point of contact specified
													</div></td>
											</tr>
										</table>
                   			</div>
                         <div class="row">
                                 <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12 col-12">
                                     <div class="borderBox">

                                                                <h4 class="borderBoxHeading">Area of Research</h4>
                                                                <button id="areaOfResearchAddBtn" class="addBtn font hoverColor" (click)="showaddAreaOfResearch()" 
                                                                	*ngIf="(result?.grantCall?.grantCallResearchAreas?.length > 0 && mode == 'view') || (mode != 'view')">
																	<i [ngClass]="addResearch?'fa fa-angle-double-up':'fa fa-angle-double-down'" class="fa-large"></i>
																</button>
                                                                
                                                                <table class="table table-responsive tableSkin grid2">
                                                                		<tr id="addAreaOfResearchRow" *ngIf="addResearch && mode != 'view'">
																			<td colspan="3"><label>Research Area:</label><br/>
																				<div>
																					 <ng2-completer title=""
																						[inputClass]="completerID"
																						[(ngModel)]="selectedResearchArea" placeholder="Search here for Area of Research"
																						[datasource]="areaList" [minSearchLength]="0"></ng2-completer> 
																						
																				</div>
																			</td>
																			<td><br/>
																				<button class="btnSkin btnSkinPrimary" (click)="addResearchArea()">Add</button>
																			</td>
																		</tr>
                                                               			<tbody *ngIf="addResearch && result?.grantCall?.grantCallResearchAreas?.length > 0">
	                                                                        <tr >
	                                                                                <th style="width:10%">Sl no</th>
	                                                                                <th style="width:10%">Code</th>
	                                                                                <th >Research Area</th>
	                                                                                <th *ngIf="mode != 'view'">Action</th>
	                                                                        </tr>
	                                                                        <tr *ngFor="let researchArea of result?.grantCall?.grantCallResearchAreas;let i = index">
	                                                                                <td>{{i+1}}</td>
	                                                                                <td>{{researchArea.researchAreaCode}}</td>
	                                                                                <td>{{researchArea.researchArea.description}}</td>
	                                                                                <td *ngIf="mode != 'view'"><ul class="actionButtonGroup">
																							<li><a href="#" data-toggle="modal"
																								data-target="#deleteResearchArea"
																								(click)="tempSaveResearchAreaObject($event,researchArea)"><i
																									class="fa fa-trash-o pointer" title="remove this research area" aria-hidden="true"></i></a></li>
																						</ul>
																					</td>
																			</tr>
																			<tr *ngIf = "areaWarning"><td colspan="4"><span class="mandatory">* Research area already added</span></td></tr>
	                                                                	</tbody>
	                                                                	<tr *ngIf="result?.grantCall?.grantCallResearchAreas?.length == 0 && mode == 'view'">
																			<td colspan="4"><div class="noDataExists">
																					No areas of research included in this grant call
																				</div></td>
																		</tr>
                                                                </table>
                                                        </div>
                                                </div>
                                                <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12 col-12">
                                                        <div class="borderBox">
                        
                                                                        <h4 class="borderBoxHeading">Eligibility</h4>
                                                                        <button id="areaOfResearchAddBtn" class="addBtn font hoverColor" (click)="showaddEligibility()" 
                                                                        	*ngIf="(result?.grantCall?.grantCallEligibilities?.length > 0 && mode == 'view') || (mode != 'view')">
																			<i [ngClass]="isEligibleAddopen?'fa fa-angle-double-up':'fa fa-angle-double-down'" class="fa-large"></i>
																		</button>
                                                                        <table class="table table-responsive tableSkin grid2">
                                                                        		<tr id="addEligibilityRow" *ngIf="isEligibleAddopen && mode != 'view'">
																					<td colspan="2"><label>Criteria:</label><br/>
																						<select class="committeeBox dateBox" [(ngModel)] = "selectedCriteria">
																							<option>{{select}}</option>
																							<option *ngFor="let criteria of result?.grantCallCriterias">{{criteria.description}}</option>
																						</select></td>
																					<td colspan="2"><label>Type:</label><br/>
																						<select class="committeeBox dateBox" [(ngModel)] = "selectedEligibilityType" >
																							<option>{{select}}</option>
																							<option *ngFor="let type of result?.grantCallEligibilityTypes">{{type.description}}</option>
																						</select>
																					</td>
																					<td><br/>
																						<button class="btnSkin btnSkinPrimary" (click)="addEligibility()">Add</button>
																					</td>
																				</tr>
																				<tbody *ngIf="result?.grantCall?.grantCallEligibilities?.length > 0 && isEligibleAddopen">
                                                                                <tr >
                                                                                        <th >Sl no</th>
                                                                                        <th >Criteria</th>
                                                                                        <th  colspan="2">Type</th>
                                                                                        <th  *ngIf="mode != 'view'">Action</th>
                                                                                </tr>
                                                                                <tr *ngFor="let eligibility of  result?.grantCall?.grantCallEligibilities;let i = index">
                                                                                        <td>{{i+1}}</td>
                                                                                        <td>{{eligibility?.grantCallCriteria?.description}}</td>
                                                                                        <td colspan="2">{{eligibility?.grantCallEligibilityType?.description}}</td>
                                                                                        <td *ngIf="mode != 'view'"><ul class="actionButtonGroup">
																								<li><a href="#" data-toggle="modal"
																									data-target="#deleteEligibility"
																									(click)="tempSaveEligibilityObject($event,eligibility,i)"><i
																										class="fa fa-trash-o pointer" title="remove this eligibility criteria" aria-hidden="true"></i></a></li>
																							</ul>
																						</td>
																				</tr>
																				<tr *ngIf = "eligibilityWarning"><td colspan="5"><span class="mandatory">* Eligibility already added</span></td></tr>
                                                                             </tbody>  
                                                                             <tr *ngIf="result?.grantCall?.grantCallEligibilities?.length == 0 && mode == 'view'">
																				<td colspan="5"><div class="noDataExists">
																						There are no eligibility criteria specified
																					</div></td>
																			</tr> 
                                                                        </table>
                                                                </div>
                                                                </div>
                                                        </div>
                                                        <div class="borderBox col-12">
                                                                        <h4 class="borderBoxHeading">Supporting Documents</h4>
                                                                        <button title="add new attachment" class="addBtn font attachBtn" style="right:55px" (click)="showAddAttachmentPopUp($event)" *ngIf="mode != 'view'" data-toggle="modal" data-target="#addAttachment">
																				<i class="fa fa-plus"></i>&nbsp;<span>Add Attachment</span>
																		</button>
																		<button id="attachmentExpandBtn" class="addBtn font hoverColor btnPositionFullWidget" (click)="isAttachmentListOpen = !isAttachmentListOpen" 
                                                                        	*ngIf="(result?.grantCall?.grantCallAttachments?.length > 0)">
																			<i [ngClass]="isAttachmentListOpen?'fa fa-angle-double-up':'fa fa-angle-double-down'" class="fa-large"></i>
																		</button>
                                                                        <table class="table table-responsive tableSkin grid2">
                                                                        	<tbody *ngIf = "result?.grantCall?.grantCallAttachments?.length > 0 && isAttachmentListOpen">
                                                                                <tr >
                                                                                        <th >Sl No</th>
                                                                                        <th >Attachment Type</th>
                                                                                        <th >Description</th>
                                                                                        <th >File Name</th>
                                                                                        <th >Action</th>
                                                                                </tr>
                                                                                <tr *ngFor = "let attachment of result?.grantCall?.grantCallAttachments;let i = index">
                                                                                        <td>{{i+1}}</td>
                                                                                        <td>{{attachment?.grantCallAttachType?.description}}</td>
                                                                                        <td title="{{(attachment?.description?.length>60)?(attachment?.description):''}}">{{(attachment?.description?.length > 60)?(attachment?.description | slice:0:60)+'...':(attachment?.description)}}</td>
                                                                                        <td title="{{(attachment?.fileName?.length>60)?(attachment?.fileName):''}}">{{(attachment?.fileName?.length > 60)?(attachment?.fileName | slice:0:60)+'...':(attachment?.fileName)}}</td>
	                                                                                    <td ><ul class="actionButtonGroup">
																								<li *ngIf="mode != 'view'"><a (click)="tempSaveAttachments($event,attachment,i)" *ngIf="editScheduleattachment == true" 
																									data-toggle="modal" data-target="#deleteAttachment" title="Click here to delete {{(attachment?.fileName?.length > 20)?(attachment?.fileName | slice:0:20)+'...':(attachment?.fileName)}}"><i
																										class="fa fa-trash-o" ></i></a></li>
																								<li><a  (click)="downloadAttachments($event, attachment)" title="Click here to download {{(attachment?.fileName?.length > 20)?(attachment?.fileName | slice:0:20)+'...':(attachment?.fileName)}}"> 
																									<i class="fa fa-download pointer" aria-hidden="true"></i></a></li>
																							</ul>
                                                                                		</td>
																				</tr>
																			</tbody>
																			<tr *ngIf="result?.grantCall?.grantCallAttachments?.length == 0 && mode == 'view'">
																				<td colspan="5"><div class="noDataExists">
																						There are no attachments uploaded
																					</div></td>
																			</tr> 
                                                                        </table>
																</div>
																
                                                                <div class="col-12 text-right" *ngIf="mode != 'view'">
																		<p class="mandatory warningMessage" *ngIf="saveSuccessfulMessage!=null"> {{saveSuccessfulMessage}}</p>
                                                                	<button type="button" class="btnSkin btnPublish" (click) = "showPublishWarning = true" data-toggle="modal" data-target="#publishWarning" href="#scrollToTop"  [disabled] = "result.grantCall.grantCallId ==null" *ngIf="result?.grantCall?.grantCallId !=null">Publish</button>
																	<button type="button" class="btnSkin btnSkinPrimary" (click)="saveGrant()" data-target="#saveGrant" data-toggle="modal" href="#scrollToTop">Save</button>
																	
																</div>
																
                              
			</div>
		</section>
		<div class="footerPush"></div>
	</div>
</div>

<!-- ADD ATTACHMENT MODAL -->
<div class="modal fade mySkinDialog modalFallBack" id="addAttachment"
		tabindex="-1" role="dialog" aria-labelledby="skippedSchedulesTitle"
		aria-hidden="true" *ngIf="showAddAttachment">
		<div class="modal-dialog modal-lg modal-dialog-centered"
			role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="skippedSchedulesLongTitle">Add
						Attachment</h5>
					<button type="button" class="close" data-dismiss="modal"
						aria-label="Close" (click)="showAddAttachment = false">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<div class="pullSide">
						<div class="gridSkin">
							<div class="row"  *ngIf="showAddAttachment">
								<div class="col-xl-4 col-lg-4 col-md-6 col-sm-12 col-4 attach-desc">
									<label><span class="mandatory">*</span> Attachment Type:</label><br/>
									<select class="committeeBox dateBox" [(ngModel)] = "selectedAttachmentType">
										<option (value)="select">{{select}}</option>
										<option *ngFor="let attachType of result?.grantCallAttachTypes" (value)="attachType">
											{{attachType.description}}
										</option>
									</select>
								</div>
								<div class="col-xl-8 col-lg-8 col-md-6 col-sm-12 col-8 attach-desc">
									<label>Description:</label><br/>
									<textarea id="desc" rows="1" [(ngModel)] = "attachmentDescription" placeholder="" class="scheduleBoxes forTextAreaEntry"></textarea>
								</div>
							</div>
						</div>
					</div>

					<file-drop
						(onFileDrop)="dropped($event)" (onFileOver)="fileOver($event)"
						(onFileLeave)="fileLeave($event)">
						<button class="btnSkin btnSkinPrimary" (click)="triggerAdd()">Choose Files</button>
						<input type="file" #file (change)="onChange(file.files)" multiple id="addAttach" style="display: none"/>
						<div style="color: #00BCD4; margin-left: 10px;"> OR Drop files here</div>
					</file-drop>
					<div class="row">
						<div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
							<div class="fileChips regularFont">
								<span *ngFor="let item of uploadedFile; let i=index"
									title="{{(item?.name?.length > 30)?item?.name:''}}">
										{{(item?.name?.length > 30)?(item?.name | slice:0:30)+'...':(item?.name)}}
									<i class="fa fa-close hand-cursor" title="Remove File" (click)="deleteFromUploadedFileList(item)"></i>
								</span>
							</div>
						</div>
					</div>
					<!-- <div *ngIf="attachmentWarning"><span class="mandatory font">*File already added</span></div>
					<div *ngIf="attachmentTypeWarning"><span class="mandatory font">*Please fill the mandatory field</span></div> -->
					<div *ngIf="attachmentWarning"><span class="mandatory font">{{attachmentWarningMsg}}</span></div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btnSkin btn-secondary" data-dismiss="modal" (click)="closeAttachments()">Close</button>
					<button type="button" class="btnSkin btnSkinPrimary" (click)="addAttachments()"  >Add</button>
				</div>
			</div>
		</div>
	</div>

<!-- DELETE ATTACHMENT WARNING MODAL -->
	<div class="modal fade mySkinDialog modalFallBack" *ngIf="showDeleteAttachment" tabindex="-1"
		id="deleteAttachment" tabindex="-1" role="dialog"
		aria-labelledby="deleteModalTitle" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title">Delete</h5>

					<button type="button" class="close" data-dismiss="modal"
						aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<p>Are you sure you want to delete this item?</p>
				</div>
				<div class="modal-footer">
					<button type="button" class="btnSkin btn-secondary"
						data-dismiss="modal" data-toggle="modal" (click)="showDeleteAttachment = false">No</button>
					<button type="button" class="btnSkin btnSkinPrimary"
						(click)="deleteAttachments($event)" data-dismiss="modal">Yes</button>
				</div>
			</div>
		</div>
	</div>


	<!-- DELETE ELIGIBILITY WARNING MODAL -->
	<div class="modal fade mySkinDialog modalFallBack" *ngIf="showDeleteEligibility" tabindex="-1"
		id="deleteEligibility" tabindex="-1" role="dialog"
		aria-labelledby="deleteModalTitle" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title">Delete</h5>

					<button type="button" class="close" data-dismiss="modal"
						aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<p>Are you sure you want to delete this item?</p>
				</div>
				<div class="modal-footer">
					<button type="button" class="btnSkin btn-secondary"
						data-dismiss="modal" data-toggle="modal" (click)="showDeleteEligibility = false">No</button>
					<button type="button" class="btnSkin btnSkinPrimary"
						(click)="deleteEligibility($event)" data-dismiss="modal">Yes</button>
				</div>
			</div>
		</div>
	</div>

	<!-- DELETE RESEARCH AREA WARNING MODAL -->
	<div class="modal fade mySkinDialog modalFallBack" *ngIf="showDeleteResearchArea" tabindex="-1"
		id="deleteResearchArea" tabindex="-1" role="dialog"
		aria-labelledby="deleteModalTitle" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title">Delete</h5>

					<button type="button" class="close" data-dismiss="modal"
						aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<p>Are you sure you want to delete this item?</p>
				</div>
				<div class="modal-footer">
					<button type="button" class="btnSkin btn-secondary"
						data-dismiss="modal" data-toggle="modal" (click)="showDeleteResearchArea = false">No</button>
					<button type="button" class="btnSkin btnSkinPrimary"
						(click)="deleteResearchArea($event)" data-dismiss="modal">Yes</button>
				</div>
			</div>
		</div>
	</div>

	<!-- DELETE POINT OF CONTACT WARNING MODAL -->
	<div class="modal fade mySkinDialog modalFallBack" *ngIf="showDeletePOC" tabindex="-1"
		id="deletePointOfContact" tabindex="-1" role="dialog"
		aria-labelledby="deleteModalTitle" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title">Delete</h5>

					<button type="button" class="close" data-dismiss="modal"
						aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<p>Are you sure you want to delete this item?</p>
				</div>
				<div class="modal-footer">
					<button type="button" class="btnSkin btn-secondary"
						data-dismiss="modal" data-toggle="modal" (click)="showDeletePOC = false">No</button>
					<button type="button" class="btnSkin btnSkinPrimary"
						(click)="deletePointOfContact($event)" data-dismiss="modal">Yes</button>
				</div>
			</div>
		</div>
	</div>

	<!-- PUBLISH GRANT WARNING MODAL -->
	<div class="modal fade mySkinDialog modalFallBack" *ngIf="showPublishWarning" tabindex="-1"
		id="publishWarning" tabindex="-1" role="dialog"
		aria-labelledby="deleteModalTitle" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title">Publish</h5>

					<button type="button" class="close" data-dismiss="modal"
						aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<p>Are you sure you want to publish this grant call?</p>
				</div>
				<div class="modal-footer">
					<button type="button" class="btnSkin btn-secondary"
						data-dismiss="modal" data-toggle="modal" (click)="showPublishWarning = false">No</button>
					<button type="button" class="btnSkin btnSkinPrimary"
						(click)="publishCall()" data-dismiss="modal">Yes</button>
				</div>
			</div>
		</div>
	</div>

<!-- SAVE GRANT CALL MODAL -->
	<div class="modal fade mySkinDialog modalFallBack" *ngIf="showSaveGrantModal" tabindex="-1"
id="saveGrant" tabindex="-1" role="dialog"
aria-labelledby="deleteModalTitle" aria-hidden="true">
<div class="modal-dialog modal-dialog-centered" role="document">
	<div class="modal-content">
		<div class="modal-header">
			<h5 class="modal-title">Success</h5>
			<button type="button" class="close" data-dismiss="modal"
				aria-label="Close">
				<span aria-hidden="true">&times;</span>
			</button>
		</div>
		<div class="modal-body">
			<p>Grant Call has been saved successfully</p>
		</div>
		<div class="modal-footer">
			<button type="button" class="btnSkin btnSkinPrimary" data-dismiss="modal">Ok</button>
	</div>
			
	</div>
</div>
</div>

<!-- CONFIRM GOBACK MODAL -->
	<div class="modal fade mySkinDialog modalFallBack" *ngIf="showConfirmGoBack" tabindex="-1"
		id="confirmGoBack" tabindex="-1" role="dialog"
		aria-labelledby="confirmGoBackModalTitle" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title">Warning..!</h5>
					<button type="button" class="close" data-dismiss="modal"
						aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<p>You are currently creating/editing a grant call. Unsaved changes may lost if you go back. Do you want to stay on this page.?</p>
				</div>
				<div class="modal-footer">
					<button type="button" class="btnSkin btn-secondary"
						data-dismiss="modal" data-toggle="modal" (click)="backToList($event)">No</button>
					<button type="button" class="btnSkin btnSkinPrimary"
						(click)="showConfirmGoBack = false" data-dismiss="modal">Yes</button>
				</div>
					
			</div>
		</div>
	</div>
	